<?xml version="1.0" encoding="utf-8"?>
<system>
 <features>
  <iommu enabled="true"/>
 </features>
 <platform>
  <processor logicalCpus="2" speed="2900" vmxTimerRate="5"/>
  <memory>
   <memoryBlock allocatable="true" name="ram_1" physicalAddress="16#0000#" size="16#8000_0000#"/>
  </memory>
  <devices pciConfigAddress="16#f800_0000#">
   <device name="debugconsole">
    <ioPort end="16#50b8#" name="serial" start="16#50b0#"/>
   </device>
   <device name="ioapic">
    <memory caching="UC" name="mmio_regs" physicalAddress="16#fec0_0000#" size="16#1000#"/>
   </device>
   <device name="xhci">
    <pci bus="16#00#" device="16#14#" function="0" msi="true"/>
    <irq name="irq" number="40"/>
    <memory caching="UC" name="mmio" physicalAddress="16#d252_0000#" size="16#0001_0000#"/>
   </device>
   <device name="nic1">
    <pci bus="16#23#" device="16#19#" function="0" msi="false"/>
    <irq name="irq" number="20"/>
    <memory caching="UC" name="mmio1" physicalAddress="16#d250_0000#" size="16#0002_0000#"/>
    <memory caching="UC" name="mmio2" physicalAddress="16#d253_b000#" size="16#1000#"/>
   </device>
   <device name="iommu_1">
    <memory caching="UC" name="mmio" physicalAddress="16#fed9_0000#" size="16#1000#"/>
    <capabilities>
     <capability name="iommu"/>
    </capabilities>
   </device>
   <device name="second_iommu">
    <memory caching="UC" name="MMIO_1" physicalAddress="16#fed9_1000#" size="16#1000#"/>
    <capabilities>
     <capability name="iommu"/>
     <capability name="agaw">39</capability>
    </capabilities>
   </device>
  </devices>
 </platform>
 <kernelDiagnosticsDevice physical="debugconsole">
  <ioPort physical="serial"/>
 </kernelDiagnosticsDevice>
 <memory>
  <memory caching="WB" name="dummy" physicalAddress="16#1000#" size="16#1000#"/>
  <memory alignment="16#1000#" caching="UC" name="nic1|dma" physicalAddress="16#2000#" size="16#1000#"/>
  <memory alignment="16#1000#" caching="UC" name="xhci|dma" physicalAddress="16#3000#" size="16#1000#"/>
 </memory>
 <deviceDomains>
  <domain name="nic1_domain">
   <memory>
    <memory executable="false" logical="dma1" physical="nic1|dma" virtualAddress="16#1000#" writable="true"/>
   </memory>
   <devices>
    <device logical="nic1" physical="nic1"/>
   </devices>
  </domain>
  <domain name="xhci_domain">
   <memory>
    <memory executable="false" logical="dma2" physical="xhci|dma" virtualAddress="16#2000#" writable="true"/>
   </memory>
   <devices>
    <device logical="xhci" physical="xhci"/>
   </devices>
  </domain>
 </deviceDomains>
 <events>
  <event mode="switch" name="trap_to_subject1"/>
 </events>
 <channels>
  <channel hasEvent="ipi" name="data_channel" size="16#1000#"/>
  <channel hasEvent="switch" name="data_channel2" size="16#2000#"/>
  <channel name="data_channel3" size="16#1000#"/>
  <channel name="data_channel4" size="16#1000#"/>
 </channels>
 <components>
  <component name="linux">
   <binary filename="lnx_bin" size="16#1000#" virtualAddress="16#2000#"/>
  </component>
  <component name="c1">
   <binary filename="c1_bin" size="16#1000#" virtualAddress="16#0020_0000#"/>
  </component>
  <component name="c2">
   <channels>
    <reader logical="primary_data" size="16#1000#" virtualAddress="16#3000#"/>
    <reader logical="secondary_data" size="16#1000#" virtualAddress="16#4000#"/>
   </channels>
   <binary filename="c2_bin" size="16#1000#" virtualAddress="16#0020_0000#"/>
  </component>
 </components>
 <subjects>
  <subject name="lnx" profile="linux">
   <memory>
    <memory executable="false" logical="dummy" physical="dummy" virtualAddress="16#3000#" writable="true"/>
   </memory>
   <devices>
    <device logical="xhci" physical="xhci">
     <irq logical="irq" physical="irq" vector="55"/>
     <memory executable="false" logical="mmio" physical="mmio" virtualAddress="16#d252_0000#" writable="true"/>
    </device>
   </devices>
   <events>
    <source>
     <group name="vmx_exit">
      <event action="continue" id="0" logical="default_event_0">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="1" logical="default_event_1">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="2" logical="default_event_2">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="3" logical="default_event_3">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="4" logical="default_event_4">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="5" logical="default_event_5">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="6" logical="default_event_6">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="7" logical="default_event_7">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="8" logical="default_event_8">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="9" logical="default_event_9">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="10" logical="default_event_10">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="11" logical="default_event_11">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="12" logical="default_event_12">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="13" logical="default_event_13">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="14" logical="default_event_14">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="15" logical="default_event_15">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="16" logical="default_event_16">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="17" logical="default_event_17">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="18" logical="default_event_18">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="19" logical="default_event_19">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="20" logical="default_event_20">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="21" logical="default_event_21">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="22" logical="default_event_22">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="23" logical="default_event_23">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="24" logical="default_event_24">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="25" logical="default_event_25">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="26" logical="default_event_26">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="27" logical="default_event_27">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="28" logical="default_event_28">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="29" logical="default_event_29">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="30" logical="default_event_30">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="31" logical="default_event_31">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="32" logical="default_event_32">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="33" logical="default_event_33">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="34" logical="default_event_34">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="36" logical="default_event_36">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="37" logical="default_event_37">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="39" logical="default_event_39">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="40" logical="default_event_40">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="41" logical="default_event_41">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="43" logical="default_event_43">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="44" logical="default_event_44">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="45" logical="default_event_45">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="46" logical="default_event_46">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="47" logical="default_event_47">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="48" logical="default_event_48">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="49" logical="default_event_49">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="50" logical="default_event_50">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="51" logical="default_event_51">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="52" logical="default_event_52">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="53" logical="default_event_53">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="54" logical="default_event_54">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="55" logical="default_event_55">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="56" logical="default_event_56">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="57" logical="default_event_57">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="58" logical="default_event_58">
       <notify physical="trap_to_subject1"/>
      </event>
      <event action="continue" id="59" logical="default_event_59">
       <notify physical="trap_to_subject1"/>
      </event>
     </group>
    </source>
   </events>
   <channels>
    <reader logical="channel_1" physical="data_channel" vector="12" virtualAddress="16#6000#"/>
    <reader logical="channel_2" physical="data_channel2" virtualAddress="16#7000#"/>
    <writer logical="channel_3" physical="data_channel3" virtualAddress="16#9000#"/>
    <writer logical="channel_4" physical="data_channel4" virtualAddress="16#a000#"/>
   </channels>
   <component ref="linux"/>
  </subject>
  <subject name="subject1" profile="native">
   <memory>
    <memory executable="false" logical="dummy" physical="dummy" virtualAddress="16#1000#" writable="true"/>
   </memory>
   <devices>
    <device logical="nic1" physical="nic1">
     <pci bus="16#00#" device="16#19#" function="0"/>
     <irq logical="irq" physical="irq" vector="56"/>
     <memory executable="false" logical="mmio1" physical="mmio1" virtualAddress="16#d252_0000#" writable="true"/>
     <memory executable="false" logical="mmio2" physical="mmio2" virtualAddress="16#d262_0000#" writable="true"/>
    </device>
   </devices>
   <events>
    <target>
     <event logical="trap_to_subject1" physical="trap_to_subject1" vector="none"/>
    </target>
   </events>
   <channels>
    <writer event="1" logical="primary_data" physical="data_channel" virtualAddress="16#3000#"/>
    <writer event="1" logical="secondary_data" physical="data_channel2" virtualAddress="16#5000#"/>
   </channels>
   <monitor>
    <state subject="lnx" virtualAddress="16#4000#" writable="true"/>
   </monitor>
   <component ref="c1">
    <map logical="primary_data" physical="data_channel"/>
    <map logical="secondary_data" physical="data_channel2"/>
   </component>
  </subject>
  <subject name="subject2" profile="native">
   <memory>
    <memory executable="false" logical="dummy" physical="dummy" virtualAddress="16#1000#" writable="true"/>
   </memory>
   <devices/>
   <events/>
   <component ref="c2">
    <map logical="primary_data" physical="data_channel3"/>
    <map logical="secondary_data" physical="data_channel4"/>
   </component>
  </subject>
 </subjects>
 <scheduling tickRate="10000">
  <majorFrame>
   <cpu id="0">
    <minorFrame subject="lnx" ticks="60"/>
    <minorFrame subject="lnx" ticks="20"/>
   </cpu>
   <cpu id="1">
    <minorFrame subject="tau0" ticks="40"/>
    <minorFrame subject="subject2" ticks="20"/>
    <minorFrame subject="subject2" ticks="20"/>
   </cpu>
  </majorFrame>
  <majorFrame>
   <cpu id="0">
    <minorFrame subject="lnx" ticks="10"/>
    <minorFrame subject="lnx" ticks="20"/>
    <minorFrame subject="lnx" ticks="40"/>
    <minorFrame subject="lnx" ticks="20"/>
    <minorFrame subject="lnx" ticks="10"/>
    <minorFrame subject="lnx" ticks="10"/>
   </cpu>
   <cpu id="1">
    <minorFrame subject="tau0" ticks="10"/>
    <minorFrame subject="subject2" ticks="30"/>
    <minorFrame subject="tau0" ticks="30"/>
    <minorFrame subject="subject2" ticks="20"/>
    <minorFrame subject="tau0" ticks="20"/>
   </cpu>
  </majorFrame>
 </scheduling>
</system>

